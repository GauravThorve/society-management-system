{% extends 'base.html' %}
{% block content %}
<style>
    body {
    font-family: Arial, sans-serif;
    background-color: #f2f2f2;
    margin: 0;
    padding: 20px;
}

h3, h4 {
    margin-top: 20px;
}

hr {
    margin: 20px 0;
}

form {
    margin-bottom: 15px;
}

input, select, textarea {
    padding: 6px;
    width: 250px;
    border: 1px solid #ccc;
    border-radius: 3px;
    margin-top: 5px;
}

textarea {
    width: 300px;
    height: 60px;
}

button {
    padding: 6px 12px;
    background-color: #2c7be5;
    color: white;
    border: none;
    border-radius: 3px;
    cursor: pointer;
}

button:hover {
    background-color: #1a5dc9;
}

table {
    border-collapse: collapse;
    width: 80%;
    background-color: white;
}

table th, table td {
    border: 1px solid #ccc;
    padding: 8px;
    text-align: left;
}

table th {
    background-color: #e9e9e9;
}

p {
    font-weight: bold;
}
form input,
form select,
form textarea {
    display: block;
    margin-bottom: 10px;
}

</style>


<body>
<h3>Admin Dashboard</h3>
<p>Welcome, {{ request.user.email|cut:"@gmail.com"|upper  }}</p>

<hr>

<h4>Create Owner</h4>
<form method="post" action="{% url 'create_owner' %}">
    {% csrf_token %}
    <input type="email" name="email" required>
    <button type="submit">Create Owner</button>
    
</form>

<hr>
<h4>Create Trenant</h4>
<form method="POST" action="{% url 'create_tenant' %}">
    {% csrf_token %}

    <input type="email" name="email" placeholder="Tenant Email" required>

    <select name="flat" required>
        {% for flat in flats %}
            <option value="{{ flat.id }}">{{ flat.flat_number }}</option>
        {% endfor %}
    </select>

    <input type="date" name="move_in_date" required>

    <button type="submit">Create Tenant</button>
</form>


<hr>

<h4>Society List</h4>
<table>
    <tr>
        <th>Name</th>
        <th>Address</th>
    </tr>
    {% for society in societies %}
    <tr>
        <td>{{ society.name }}</td>
        <td>{{ society.address }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="2">No societies found</td></tr>
    {% endfor %}
</table>

<hr>

<h4>Flat List</h4>
<table>
    <tr>
        <th>Flat Number</th>
        <th>Owner</th>
        <th>Society</th>
    </tr>
    {% for flat in flats %}
    <tr>
        <td>{{ flat.flat_number }}</td>
        <td>{{ flat.owner.email }}</td>
        <td>{{ flat.society.name }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="3">No flats found</td></tr>
    {% endfor %}
</table>

<h4>Create Society</h4>
<form method="post">
    {% csrf_token %}
    <input type="text" name="society_name" placeholder="Society Name" required>
    <br><br>
    <textarea name="address" placeholder="Address" required></textarea>
    <br><br>
    <button type="submit">Create Society</button>
</form>

<hr>

<h4>Create Flat</h4>
<form method="post">
    {% csrf_token %}
    <input type="text" name="flat_number" placeholder="Flat Number" required>
    <br><br>

    <select name="owner" required>
        <option value="">Select Owner</option>
        {% for owner in owners %}
            <option value="{{ owner.id }}">{{ owner.email }}</option>
        {% endfor %}
    </select>
    <br><br>

    <select name="society" required>
        <option value="">Select Society</option>
        {% for society in societies %}
            <option value="{{ society.id }}">{{ society.name }}</option>
        {% endfor %}
    </select>
    <br><br>

    <button type="submit">Create Flat</button>
</form>

<hr>

<h4>Create Maintenance Bill</h4>

<form method="post">
    {% csrf_token %}

    <select name="flat" required>
        <option value="">Select Flat</option>
        {% for flat in flats %}
            <option value="{{ flat.id }}">
                {{ flat.flat_number }} - Tenant: {{ flat.tenant.email }}
            </option>
        {% endfor %}
    </select>
    <br><br>

    <input type="text" name="month" placeholder="Month like April 2026" required>
    <br><br>

    <input type="number" step="0.01" name="amount" placeholder="Amount" required>
    <br><br>

    <button type="submit">Create Bill</button>
</form>




<br><hr><br>

<form method="post" action="{% url 'logout' %}">
    {% csrf_token %}
    <button type="submit">Logout</button>
</form>

</body>
{% endblock %}